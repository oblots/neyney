<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dear Neyney Bear</title>
  <!-- Google Fonts for a handwritten look -->
  <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">
  <!-- Animate.css CDN for simple fade/roll animations -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <style>
    body {
      background: #f7f1e3 url('https://www.transparenttextures.com/patterns/old-mathematics.png');
      min-height: 100vh;
      font-family: 'Indie Flower', cursive;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    .letter-container {
      margin-top: 60px;
      perspective: 1000px;
      width: 380px;
      max-width: 90vw;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .rolled-letter {
      position: relative;
      background: #f9e4b7;
      width: 340px;
      height: 70px;
      max-width: 85vw;
      border-radius: 35px;
      box-shadow: 0 10px 24px rgba(0,0,0,0.18), 0 1.5px 0 #c5a76c;
      margin-bottom: 16px;
      overflow: visible;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 2;
      border: 2px solid #c5a76c;
      background-image:
        url('https://www.transparenttextures.com/patterns/old-wall.png'),
        repeating-linear-gradient(135deg, #f9e4b7 0px, #e7d3a7 8px, #f9e4b7 18px);
      background-blend-mode: multiply;
    }
    .rolled-edge {
      position: absolute;
      top: 50%;
      width: 54px;
      height: 80px;
      background: #e5cd92;
      border: 2px solid #bda264;
      border-radius: 50%;
      box-shadow: 0 2px 8px rgba(0,0,0,0.13);
      transform: translateY(-50%);
      z-index: 3;
      background-image: url('https://www.transparenttextures.com/patterns/grunge-wall.png');
      background-blend-mode: multiply;
    }
    .rolled-edge.left {
      left: -34px;
    }
    .rolled-edge.right {
      right: -34px;
    }
    .ribbon {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%) rotate(-6deg);
      width: 64px;
      height: 28px;
      background: linear-gradient(90deg,#b5471d 70%, #ffc07f 100%);
      border-radius: 14px;
      border: 2px solid #8c320e;
      z-index: 4;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8em;
      color: #f9e4b7;
      box-shadow: 0 3px 9px rgba(0,0,0,0.11);
      letter-spacing: 0.05em;
      font-family: serif;
      font-weight: bold;
      text-shadow: 0 1px 2px #8c320e;
      cursor: pointer;
      background-image: linear-gradient(120deg, rgba(255,255,255,0.11) 24%, transparent 60%);
    }
    .ribbon:after {
      content:'';
      position: absolute;
      width: 10px; height: 14px;
      background: #b5471d;
      border-radius: 4px;
      left: -8px; top: 50%;
      transform: translateY(-50%) rotate(-18deg);
      z-index: -1;
    }
    .ribbon:before {
      content:'';
      position: absolute;
      width: 10px; height: 14px;
      background: #b5471d;
      border-radius: 4px;
      right: -8px; top: 50%;
      transform: translateY(-50%) rotate(18deg);
      z-index: -1;
    }
    .letter {
      display: none;
    }
    .letter.open {
      display: block;
      background: #f9e4b7;
      border: 2px solid #c5a76c;
      border-radius: 14px 14px 32px 32px/24px 24px 32px 32px;
      box-shadow: 0 16px 32px rgba(0,0,0,0.18), 0 1.5px 0 #c5a76c;
      padding: 32px 28px;
      margin-top: 0;
      min-height: 300px;
      transition: box-shadow 0.6s, background 0.6s;
      opacity: 1;
      will-change: box-shadow, background;
      position: relative;
      background-image:
        url('https://www.transparenttextures.com/patterns/grunge-wall.png'),
        url('https://www.transparenttextures.com/patterns/paper-fibers.png'),
        url('https://www.transparenttextures.com/patterns/old-mathematics.png'),
        repeating-linear-gradient(135deg,#f9e4b7 0px,#e7d3a7 18px,#f9e4b7 40px);
      background-size: auto, auto, auto, auto;
      background-blend-mode: multiply, multiply, multiply, normal;
      filter: contrast(1.08) brightness(1.01) sepia(0.17) grayscale(0.11);
      animation: openRoll 1.1s cubic-bezier(.77,.01,.36,1.02) 1;
    }
    @keyframes openRoll {
      0% { transform: rotateX(-90deg) scaleY(0.2); opacity: 0; }
      40% { opacity: 1; }
      100% { transform: rotateX(0deg) scaleY(1); opacity: 1; }
    }
    .haiku {
      margin: 34px 0 18px 0;
      font-size: 1.2em;
      letter-spacing: 0.02em;
      background: rgba(255,255,240,0.78);
      border-left: 5px solid #bda264;
      border-radius: 0 8px 8px 0;
      padding: 14px 22px;
      cursor: pointer;
      transition: background 0.2s;
      position: relative;
    }
    .haiku:hover {
      background: #f5e0c0;
    }
    .haiku span:first-child {
      font-size:1.18em;
      font-weight: bold;
      color: #a57c31;
      letter-spacing: 0.09em;
      text-shadow: 0 0 2px #f7e5c8;
    }
    .img-popup {
      display: none;
      position: fixed;
      z-index: 999;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      background: rgba(15,12,8,0.88);
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }
    .img-popup img {
      max-width: 90vw;
      max-height: 78vh;
      border-radius: 14px;
      box-shadow: 0 8px 34px rgba(0,0,0,0.35);
      border: 6px solid #fff8df;
      margin-bottom: 18px;
    }
    .img-popup button {
      background: #a57c31;
      border: none;
      color: #f9e4b7;
      font-size: 1.2em;
      padding: 7px 19px;
      border-radius: 7px;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.13);
      transition: background 0.2s;
    }
    .img-popup button:hover {
      background: #bda264;
    }

    /* Password Modal Styles */
    .password-modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      background: rgba(18, 13, 7, 0.72);
      align-items: center;
      justify-content: center;
    }
    .password-modal.active {
      display: flex;
    }
    .password-box {
      background: #f9e4b7;
      border: 2px solid #c5a76c;
      border-radius: 18px;
      box-shadow: 0 8px 38px rgba(0,0,0,0.28);
      padding: 32px 32px 24px 32px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 260px;
      /* Grainy texture */
      background-image: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
      background-blend-mode: multiply;
    }
    .password-box label {
      font-size: 1.2em;
      margin-bottom: 7px;
      color: #a57c31;
      letter-spacing: 0.04em;
    }
    .password-box input[type="password"] {
      font-size: 1.1em;
      padding: 7px 12px;
      border-radius: 6px;
      border: 1.5px solid #bda264;
      margin-bottom: 14px;
      background: #fffdf5;
      font-family: inherit;
      box-shadow: 0 2px 6px rgba(0,0,0,0.06);
      outline: none;
    }
    .password-box button {
      background: #a57c31;
      border: none;
      color: #f9e4b7;
      font-size: 1.1em;
      padding: 6px 21px;
      border-radius: 7px;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.13);
      transition: background 0.2s;
      margin-top: 4px;
    }
    .password-box button:hover {
      background: #bda264;
    }
    .password-box .error {
      color: #c02c0c;
      margin-top: 5px;
      font-size: 0.97em;
      min-height: 21px;
      letter-spacing: 0.01em;
    }
    @media (max-width: 600px) {
      .letter { padding: 12vw 3vw; font-size: 1em; }
      .letter-container { margin-top: 18vw; }
      .rolled-letter { width: 92vw; height: 36px; min-width: 0; }
      .rolled-edge { height: 48px; width: 28px; }
      .img-popup img { max-width: 98vw; }
      .password-box { padding: 14vw 4vw 8vw 4vw; min-width: 0; }
    }
  </style>
</head>
<body>
  <div class="letter-container" id="letterContainer">
    <!-- Rolled Letter with Ribbon (shown before opening) -->
    <div class="rolled-letter" id="rolledLetter">
      <div class="rolled-edge left"></div>
      <div class="ribbon" id="ribbon" title="Click to open">ðŸŽ€</div>
      <div class="rolled-edge right"></div>
    </div>
    <!-- The parchment letter (hidden until open) -->
    <div class="letter" id="letter">
      <div class="haiku" data-img="https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=facearea&w=800&q=80" title="Timezones">
        <span>S</span>omewhere you wake;<br>
        When I sleep, your sun rises<br>
        Longing spans the globe.
      </div>
      <div class="haiku" data-img="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=facearea&w=800&q=80" title="Geese & Bears">
        <span>O</span>n ponds geese whisper,<br>
        Bears lumber in our daydreamsâ€”<br>
        Soft, silly, cherished.
      </div>
      <div class="haiku" data-img="https://images.unsplash.com/photo-1432888498266-38ffec3eaf0a?auto=format&fit=facearea&w=800&q=80" title="Friendship">
        <span>U</span>nwritten promise:<br>
        Laughter, secrets, gentle trustâ€”<br>
        Best friends evermore.
      </div>
      <div class="haiku" data-img="https://images.unsplash.com/photo-1465101162946-4377e57745c3?auto=format&fit=facearea&w=800&q=80" title="Entanglement">
        <span>L</span>ight-years yet entwined,<br>
        Quantum threads stitch soul to soulâ€”<br>
        Time and space dissolve.
      </div>
      <div class="haiku" data-img="https://plus.unsplash.com/premium_photo-1664300196869-54546990d08b?q=80&w=1740&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" title="Circadian">
        <span>M</span>orning breaks the loop,<br>
        Rhythm bends, electrons danceâ€”<br>
        Patterns made anew.
      </div>
      <div class="haiku" data-img="https://images.unsplash.com/photo-1439396087961-98bc12c21176?auto=format&fit=facearea&w=800&q=80" title="Walking">
        <span>A</span>cross the city,<br>
        Ten thousand steps, wanderingâ€”<br>
        Uber walkerâ€™s path.
      </div>
      <div class="haiku" data-img="https://images.unsplash.com/photo-1502082553048-f009c37129b9?auto=format&fit=facearea&w=800&q=80" title="Whales">
        <span>T</span>ides carry great songs,<br>
        Whales echo in moonlit seasâ€”<br>
        Our hearts answer back.
      </div>
      <div class="haiku" data-img="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=facearea&w=800&q=80" title="Birthday">
        <span>E</span>ach year, candlelightâ€”<br>
        Wishes sent across the stars.<br>
        Happy birthday, Neyney Bear.
      </div>
    </div>
  </div>
  <!-- Password Modal -->
  <div class="password-modal" id="passwordModal">
    <form class="password-box" id="passwordForm" autocomplete="off">
      <label for="pwinput">What do you call me?</label>
      <input type="password" id="pwinput" name="pwinput" autocomplete="new-password" required autofocus>
      <div class="error" id="pwError"></div>
      <button type="submit">Open Letter</button>
    </form>
  </div>
  <!-- Popup for images -->
  <div class="img-popup" id="imgPopup">
    <img id="popupImg" src="" alt="Haiku Image"/>
    <button type="button" onclick="closePopup()">Close</button>
  </div>
  <script>
    // Password logic
    const ribbon = document.getElementById('ribbon');
    const rolledLetter = document.getElementById('rolledLetter');
    const letter = document.getElementById('letter');
    const passwordModal = document.getElementById('passwordModal');
    const passwordForm = document.getElementById('passwordForm');
    const pwinput = document.getElementById('pwinput');
    const pwError = document.getElementById('pwError');
    let letterOpen = false;

    // Set your password here (case sensitive)
    const LETTER_PASSWORD = "debby";

    ribbon.addEventListener('click', function(e) {
      if (!letterOpen) {
        passwordModal.classList.add('active');
        pwinput.value = "";
        pwError.textContent = "";
        setTimeout(() => { pwinput.focus(); }, 200);
      }
    });

    passwordForm.addEventListener('submit', function(e) {
      e.preventDefault();
      if (pwinput.value.trim() === LETTER_PASSWORD) {
        // Hide rolled letter
        rolledLetter.style.transition = "opacity 0.5s cubic-bezier(.77,.01,.36,1.02)";
        rolledLetter.style.opacity = 0;
        setTimeout(() => {
          rolledLetter.style.display = "none";
          letter.classList.add('open', 'animate__animated', 'animate__fadeInDown');
        }, 500);
        letterOpen = true;
        passwordModal.classList.remove('active');
        pwinput.value = "";
      } else {
        pwError.textContent = "Incorrect password. Try again.";
        pwinput.focus();
      }
    });

    // Allow ESC to close modal
    document.addEventListener('keydown', function(e) {
      if (passwordModal.classList.contains('active') && e.key === "Escape") {
        passwordModal.classList.remove('active');
        pwinput.value = "";
        pwError.textContent = "";
      }
    });

    // Haiku click to open image
    const haikus = document.querySelectorAll('.haiku');
    const imgPopup = document.getElementById('imgPopup');
    const popupImg = document.getElementById('popupImg');
    haikus.forEach(h => {
      h.addEventListener('click', function(e) {
        e.stopPropagation();
        const imgSrc = h.getAttribute('data-img');
        popupImg.src = imgSrc;
        imgPopup.style.display = 'flex';
        popupImg.alt = h.title || "Haiku Image";
      });
    });

    // Close popup
    function closePopup() {
      imgPopup.style.display = 'none';
      popupImg.src = '';
    }
    imgPopup.addEventListener('click', function(e) {
      if (e.target === imgPopup) closePopup();
    });
  </script>
</body>
</html>
